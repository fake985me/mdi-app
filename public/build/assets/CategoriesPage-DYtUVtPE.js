import{r as y,s as k,o as T,b as n,d as e,k as S,e as b,f as i,F as h,h as w,t as l,v as j,x as m,y as x,K as q,i as d}from"./main-wp7H4zy9.js";import{u as B}from"./warehouse-BgDV8_UP.js";import{P as A}from"./plus-D_kl3TaN.js";import{P as M}from"./pen-DSpFBt24.js";import{T as N}from"./trash-2-feFszY2S.js";import"./api-D6uEPlNO.js";const z={class:"p-6"},K={class:"flex justify-between items-center mb-8"},L={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W={class:"bg-white rounded-lg shadow-sm border border-gray-200"},G={class:"p-6"},H={class:"space-y-4"},I={class:"font-medium text-gray-900"},J={class:"text-sm text-gray-600"},Q={class:"text-xs text-gray-500 mt-1"},R={class:"flex space-x-2"},X=["onClick"],Y=["onClick"],Z={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ee={class:"p-6 border-b border-gray-200 flex justify-between items-center"},te={class:"p-6"},se={class:"space-y-4"},oe={class:"font-medium text-gray-900"},re={class:"text-sm text-gray-600"},le={class:"text-xs text-gray-500 mt-1"},ae={class:"flex space-x-2"},ne=["onClick"],ie=["onClick"],de={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ue={class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto"},ce={class:"text-lg font-semibold text-gray-900 mb-4"},ge={class:"flex justify-end space-x-4"},be={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},me={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},pe={class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto"},ye={class:"text-lg font-semibold text-gray-900 mb-4"},xe=["value"],fe={class:"flex justify-end space-x-4"},ve={type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},Ae={__name:"CategoriesPage",setup(he){const r=B(),f=y(!1),v=y(!1),c=y(null),g=y(null),u=k({name:"",description:""}),a=k({category_id:"",name:"",description:""}),V=o=>r.subcategories.filter(t=>t.category_id===o).length,U=o=>{c.value=o,Object.assign(u,{name:o.name,description:o.description||""})},$=o=>{g.value=o,Object.assign(a,{category_id:o.category_id,name:o.name,description:o.description||""})},E=async o=>{if(confirm("Are you sure you want to delete this category? This will also delete all associated subcategories.")){const t=await r.deleteCategory(o);t.error&&alert("Error deleting category: "+t.error.message)}},P=async o=>{if(confirm("Are you sure you want to delete this subcategory?")){const t=await r.deleteSubcategory(o);t.error&&alert("Error deleting subcategory: "+t.error.message)}},D=async()=>{c.value?await r.updateCategory(c.value.id,u):await r.createCategory(u),_()},F=async()=>{g.value?await r.updateSubcategory(g.value.id,a):await r.createSubcategory(a),C()},_=()=>{f.value=!1,c.value=null,Object.assign(u,{name:"",description:""})},C=()=>{v.value=!1,g.value=null,Object.assign(a,{category_id:"",name:"",description:""})};return T(async()=>{await r.fetchCategories(),await r.fetchSubcategories()}),(o,t)=>(d(),n("div",z,[e("div",K,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Categories"),e("p",{class:"text-gray-600"},"Manage product categories and subcategories")],-1)),e("button",{onClick:t[0]||(t[0]=s=>f.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2"},[b(i(A),{class:"w-5 h-5"}),t[7]||(t[7]=e("span",null,"Add Category",-1))])]),e("div",L,[e("div",W,[t[9]||(t[9]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Categories")],-1)),e("div",G,[e("div",H,[(d(!0),n(h,null,w(i(r).categories,s=>(d(),n("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",null,[e("h3",I,l(s.name),1),e("p",J,l(s.description||"No description"),1),e("p",Q,l(V(s.id))+" subcategories ",1)]),e("div",R,[e("button",{onClick:p=>U(s),class:"text-blue-600 hover:text-blue-800 p-1"},[b(i(M),{class:"w-4 h-4"})],8,X),e("button",{onClick:p=>E(s.id),class:"text-red-600 hover:text-red-800 p-1"},[b(i(N),{class:"w-4 h-4"})],8,Y)])]))),128))])])]),e("div",Z,[e("div",ee,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Subcategories",-1)),e("button",{onClick:t[1]||(t[1]=s=>v.value=!0),class:"bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 transition-colors text-sm flex items-center space-x-1"},[b(i(A),{class:"w-4 h-4"}),t[10]||(t[10]=e("span",null,"Add Subcategory",-1))])]),e("div",te,[e("div",se,[(d(!0),n(h,null,w(i(r).subcategories,s=>{var p;return d(),n("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",null,[e("h3",oe,l(s.name),1),e("p",re,l(s.description||"No description"),1),e("p",le," Category: "+l((p=s.categories)==null?void 0:p.name),1)]),e("div",ae,[e("button",{onClick:O=>$(s),class:"text-blue-600 hover:text-blue-800 p-1"},[b(i(M),{class:"w-4 h-4"})],8,ne),e("button",{onClick:O=>P(s.id),class:"text-red-600 hover:text-red-800 p-1"},[b(i(N),{class:"w-4 h-4"})],8,ie)])])}),128))])])])]),f.value||c.value?(d(),n("div",de,[e("div",ue,[e("h3",ce,l(c.value?"Edit Category":"Add New Category"),1),e("form",{onSubmit:j(D,["prevent"]),class:"space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,u.name]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,u.description]])]),e("div",ge,[e("button",{type:"button",onClick:_,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",be,l(c.value?"Update":"Add")+" Category ",1)])],32)])])):S("",!0),v.value||g.value?(d(),n("div",me,[e("div",pe,[e("h3",ye,l(g.value?"Edit Subcategory":"Add New Subcategory"),1),e("form",{onSubmit:j(F,["prevent"]),class:"space-y-4"},[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.category_id=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[t[14]||(t[14]=e("option",{value:""},"Select Category",-1)),(d(!0),n(h,null,w(i(r).categories,s=>(d(),n("option",{key:s.id,value:s.id},l(s.name),9,xe))),128))],512),[[q,a.category_id]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,a.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,a.description]])]),e("div",fe,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",ve,l(g.value?"Update":"Add")+" Subcategory ",1)])],32)])])):S("",!0)]))}};export{Ae as default};
