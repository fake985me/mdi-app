import{c as R,q,r as m,s as N,J as w,o as $,b as n,d as e,k as g,e as b,f as p,t as r,x as d,y,K as U,F as P,h as z,v as B,i,n as O}from"./main-wp7H4zy9.js";import{g as T,d as H,a as I,p as J}from"./api-D6uEPlNO.js";import{P as K}from"./plus-D_kl3TaN.js";import{U as Q}from"./users-B6hioAw3.js";import{S as G}from"./shield-DxaaF5uL.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=R("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),X={class:"p-6"},Y={class:"flex justify-between items-center mb-8"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ee={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},te={class:"flex items-center justify-between"},se={class:"text-2xl font-bold text-blue-600"},oe={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},le={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},re={class:"flex items-center justify-between"},ae={class:"text-2xl font-bold text-purple-600"},ne={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},de={class:"flex items-center justify-between"},ue={class:"text-2xl font-bold text-green-600"},ce={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},me={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},xe={class:"overflow-x-auto"},ge={class:"w-full"},be={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4 whitespace-nowrap"},ve={class:"flex items-center"},we={class:"flex-shrink-0 h-10 w-10"},he={class:"h-10 w-10 rounded-full bg-indigo-500 flex items-center justify-center"},_e={class:"text-white font-medium"},ke={class:"ml-4"},Ue={class:"text-sm font-medium text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},je={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},De=["onClick"],Fe=["onClick"],Me={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ve={class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto"},Ee={class:"text-lg font-semibold text-gray-900 mb-4"},Le={key:0},Re={key:1},qe={class:"flex justify-end space-x-4"},Ne={type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},He={__name:"UsersPage",setup($e){const C=q(),u=m([]),v=m(!1),a=m(null),c=m(""),f=m(""),l=N({full_name:"",email:"",password:"",role:"user"}),j=w(()=>u.value.filter(s=>s.role==="admin"||s.role==="superadmin").length),A=w(()=>u.value.filter(s=>s.role==="user").length),S=w(()=>{let s=u.value;return c.value&&(s=s.filter(t=>t.full_name.toLowerCase().includes(c.value.toLowerCase())||t.email.toLowerCase().includes(c.value.toLowerCase()))),f.value&&(s=s.filter(t=>t.role===f.value)),s}),D=s=>({superadmin:"bg-red-100 text-red-800",admin:"bg-purple-100 text-purple-800",user:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",F=s=>new Date(s).toLocaleDateString(),x=async()=>{try{const s=await T("/users");if(s.ok){const t=await s.json();u.value=t.data||t}else console.error("Failed to fetch users")}catch(s){console.error("Error fetching users:",s)}},M=s=>{a.value=s,Object.assign(l,{full_name:s.full_name,email:s.email,role:s.role})},V=async s=>{if(confirm("Are you sure you want to delete this user?"))try{const t=await H(`/users/${s}`);if(t.ok)await x();else{const o=await t.json();console.error("Failed to delete user:",o.message)}}catch(t){console.error("Error deleting user:",t)}},E=async()=>{try{if(a.value){const s=await I(`/users/${a.value.id}`,{full_name:l.full_name,role:l.role});if(s.ok)await x();else{const t=await s.json();console.error("Failed to update user:",t.message)}}else{const s=await J("/users",{name:l.full_name,email:l.email,password:l.password,password_confirmation:l.password,role:l.role});if(s.ok)await x();else{const t=await s.json();console.error("Failed to create user:",t.message)}}h()}catch(s){console.error("Error submitting user:",s)}},h=()=>{v.value=!1,a.value=null,Object.assign(l,{full_name:"",email:"",password:"",role:"user"})};return $(()=>{x()}),(s,t)=>(i(),n("div",X,[e("div",Y,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Users Management"),e("p",{class:"text-gray-600"},"Manage system users and their roles")],-1)),e("button",{onClick:t[0]||(t[0]=o=>v.value=!0),class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2"},[b(p(K),{class:"w-5 h-5"}),t[7]||(t[7]=e("span",null,"Add User",-1))])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Users",-1)),e("p",se,r(u.value.length),1)]),e("div",oe,[b(p(Q),{class:"w-6 h-6 text-blue-600"})])])]),e("div",le,[e("div",re,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Admins",-1)),e("p",ae,r(j.value),1)]),e("div",ne,[b(p(G),{class:"w-6 h-6 text-purple-600"})])])]),e("div",ie,[e("div",de,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Regular Users",-1)),e("p",ue,r(A.value),1)]),e("div",ce,[b(p(W),{class:"w-6 h-6 text-green-600"})])])])]),e("div",me,[e("div",pe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),type:"text",placeholder:"Search users...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[y,c.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>f.value=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[e("option",{value:""},"All Roles",-1),e("option",{value:"superadmin"},"Superadmin",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"user"},"User",-1)]),512),[[U,f.value]])])])]),e("div",fe,[e("div",xe,[e("table",ge,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created At "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",be,[(i(!0),n(P,null,z(S.value,o=>{var _,k;return i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",ye,[e("div",ve,[e("div",we,[e("div",he,[e("span",_e,r(((_=o.full_name)==null?void 0:_.charAt(0))||"U"),1)])]),e("div",ke,[e("div",Ue,r(o.full_name),1)])])]),e("td",Ce,r(o.email),1),e("td",je,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize",D(o.role)])},r(o.role),3)]),e("td",Ae,r(F(o.created_at)),1),e("td",Se,[e("button",{onClick:L=>M(o),class:"text-blue-600 hover:text-blue-900 mr-3"}," Edit ",8,De),o.id!==((k=p(C).profile)==null?void 0:k.id)?(i(),n("button",{key:0,onClick:L=>V(o.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,Fe)):g("",!0)])])}),128))])])])]),v.value||a.value?(i(),n("div",Me,[e("div",Ve,[e("h3",Ee,r(a.value?"Edit User":"Add New User"),1),e("form",{onSubmit:B(E,["prevent"]),class:"space-y-4"},[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.full_name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[y,l.full_name]])]),a.value?g("",!0):(i(),n("div",Le,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.email=o),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[y,l.email]])])),a.value?g("",!0):(i(),n("div",Re,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.password=o),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[y,l.password]])])),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),d(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.role=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},t[19]||(t[19]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"superadmin"},"Superadmin",-1)]),512),[[U,l.role]])]),e("div",qe,[e("button",{type:"button",onClick:h,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",Ne,r(a.value?"Update":"Add")+" User ",1)])],32)])])):g("",!0)]))}};export{He as default};
