import{r as b,A as F,q as f,o as M,b as i,d as t,k as L,e as w,f as p,t as n,v as d,x,y as h,F as D,h as k,B as $,i as u,n as q}from"./main-wl1HvSEI.js";import{u as B}from"./warehouse-BR82cYcQ.js";import{P as O}from"./plus-CcN--E47.js";import{S as z}from"./shield-hMHcbtLo.js";import{T as I}from"./triangle-alert-C77TZJDy.js";import{C as Q}from"./circle-x-Ck9rT3Um.js";import"./api-D6uEPlNO.js";const X={class:"p-6"},G={class:"flex justify-between items-center mb-8"},H={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},J={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},K={class:"flex items-center justify-between"},R={class:"text-2xl font-bold text-green-600"},Y={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},Z={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},tt={class:"flex items-center justify-between"},et={class:"text-2xl font-bold text-orange-600"},st={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},rt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ot={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold text-red-600"},at={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},dt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},it=["value"],ut={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ct={class:"overflow-x-auto"},mt={class:"w-full"},pt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm font-medium text-gray-900"},yt={class:"text-sm text-gray-500"},bt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium text-gray-900"},wt={class:"text-sm text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ht={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},kt=["onClick"],St=["onClick"],Ct={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Wt={class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto"},At=["value"],Mt={__name:"WarrantiesPage",setup(Vt){const a=B(),v=b(!1),g=b(""),m=b(""),y=b(""),o=F({product_id:"",customer_name:"",customer_contact:"",warranty_start_date:new Date().toISOString().split("T")[0],warranty_end_date:"",warranty_terms:""}),W=f(()=>{const r=new Date;return a.warranties.filter(e=>new Date(e.warranty_end_date)>r).length}),A=f(()=>{const r=new Date,e=new Date(r.getTime()+720*60*60*1e3);return a.warranties.filter(s=>{const l=new Date(s.warranty_end_date);return l>r&&l<=e}).length}),V=f(()=>{const r=new Date;return a.warranties.filter(e=>new Date(e.warranty_end_date)<=r).length}),E=f(()=>{let r=a.warranties;if(g.value&&(r=r.filter(e=>{var s;return((s=e.products)==null?void 0:s.name)&&e.products.name.toLowerCase().includes(g.value.toLowerCase())||e.customer_name&&e.customer_name.toLowerCase().includes(g.value.toLowerCase())})),m.value){const e=new Date,s=new Date(e.getTime()+720*60*60*1e3);r=r.filter(l=>{const c=new Date(l.warranty_end_date);return m.value==="active"?c>s:m.value==="expiring"?c>e&&c<=s:m.value==="expired"?c<=e:!0})}return y.value&&(r=r.filter(e=>e.product_id===y.value)),r}),S=r=>{const e=new Date,s=new Date(r),l=new Date(e.getTime()+720*60*60*1e3);return s<=e?"Expired":s<=l?"Expiring Soon":"Active"},j=r=>{const e=S(r);return{Active:"bg-green-100 text-green-800","Expiring Soon":"bg-orange-100 text-orange-800",Expired:"bg-red-100 text-red-800"}[e]},_=r=>new Date(r).toLocaleDateString(),P=r=>{var e;alert(`Warranty Details:
Product: ${(e=r.products)==null?void 0:e.name}
Customer: ${r.customer_name}
End Date: ${_(r.warranty_end_date)}`)},N=async r=>{confirm("Are you sure you want to delete this warranty?")&&await a.deleteWarranty(r)},T=async()=>{await a.createWarranty(o),C()},C=()=>{v.value=!1,Object.assign(o,{product_id:"",customer_name:"",customer_contact:"",warranty_start_date:new Date().toISOString().split("T")[0],warranty_end_date:"",warranty_terms:""})};return M(async()=>{await a.fetchWarranties(),await a.fetchProducts()}),(r,e)=>(u(),i("div",X,[t("div",G,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Warranties"),t("p",{class:"text-gray-600"},"Manage product warranties and customer information")],-1)),t("button",{onClick:e[0]||(e[0]=s=>v.value=!0),class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2"},[w(p(O),{class:"w-5 h-5"}),e[10]||(e[10]=t("span",null,"Add Warranty",-1))])]),t("div",H,[t("div",J,[t("div",K,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Active Warranties",-1)),t("p",R,n(W.value),1)]),t("div",Y,[w(p(z),{class:"w-6 h-6 text-green-600"})])])]),t("div",Z,[t("div",tt,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"Expiring Soon",-1)),t("p",et,n(A.value),1)]),t("div",st,[w(p(I),{class:"w-6 h-6 text-orange-600"})])])]),t("div",rt,[t("div",ot,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Expired",-1)),t("p",nt,n(V.value),1)]),t("div",at,[w(p(Q),{class:"w-6 h-6 text-red-600"})])])])]),t("div",lt,[t("div",dt,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),type:"text",placeholder:"Search warranties...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,g.value]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[16]||(e[16]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"expiring"},"Expiring Soon",-1),t("option",{value:"expired"},"Expired",-1)]),512),[[h,m.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product",-1)),d(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[18]||(e[18]=t("option",{value:""},"All Products",-1)),(u(!0),i(D,null,k(p(a).products,s=>(u(),i("option",{key:s.id,value:s.id},n(s.name),9,it))),128))],512),[[h,y.value]])])])]),t("div",ut,[t("div",ct,[t("table",mt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Start Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," End Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",pt,[(u(!0),i(D,null,k(E.value,s=>{var l,c;return u(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",xt,[t("div",gt,n((l=s.products)==null?void 0:l.name),1),t("div",yt,n((c=s.products)==null?void 0:c.sku),1)]),t("td",bt,[t("div",ft,n(s.customer_name||"N/A"),1),t("div",wt,n(s.customer_contact||"N/A"),1)]),t("td",vt,n(_(s.warranty_start_date)),1),t("td",_t,n(_(s.warranty_end_date)),1),t("td",ht,[t("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",j(s.warranty_end_date)])},n(S(s.warranty_end_date)),3)]),t("td",Dt,[t("button",{onClick:U=>P(s),class:"text-blue-600 hover:text-blue-900 mr-3"}," View ",8,kt),t("button",{onClick:U=>N(s.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,St)])])}),128))])])])]),v.value?(u(),i("div",Ct,[t("div",Wt,[e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Add Warranty",-1)),t("form",{onSubmit:$(T,["prevent"]),class:"space-y-4"},[t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product",-1)),d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.product_id=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[e[21]||(e[21]=t("option",{value:""},"Select Product",-1)),(u(!0),i(D,null,k(p(a).products,s=>(u(),i("option",{key:s.id,value:s.id},n(s.name)+" ("+n(s.sku)+") ",9,At))),128))],512),[[h,o.product_id]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Customer Name",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.customer_name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.customer_name]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Customer Contact",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.customer_contact=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.customer_contact]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warranty Start Date",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.warranty_start_date=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.warranty_start_date]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warranty End Date",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.warranty_end_date=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.warranty_end_date]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warranty Terms",-1)),d(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.warranty_terms=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.warranty_terms]])]),t("div",{class:"flex justify-end space-x-4"},[t("button",{type:"button",onClick:C,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e[28]||(e[28]=t("button",{type:"submit",class:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700"}," Add Warranty ",-1))])],32)])])):L("",!0)]))}};export{Mt as default};
