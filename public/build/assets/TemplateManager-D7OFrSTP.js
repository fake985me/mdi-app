import{r as i,o as A,b as a,d as t,k as E,e as u,f as m,v as r,y as h,s as V,j as B,F as D,h as F,t as d,x,P as L,C as $,i as n,n as z}from"./main-wl1HvSEI.js";import{u as G,C as I,P as O}from"./template-DdKsT5Ig.js";import{P}from"./plus-CcN--E47.js";import{F as R}from"./file-text-C6Ow2Sli.js";import{T as q}from"./trash-2-DD-7q0V3.js";import"./api-D6uEPlNO.js";const H={class:"p-6"},J={class:"flex justify-between items-center mb-8"},K={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6"},Q={class:"flex flex-wrap gap-4"},W={key:0,class:"flex justify-center items-center py-20"},X={key:1,class:"text-center py-20"},Y={class:"mt-6"},Z={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee={class:"p-5"},te={class:"flex justify-between items-start"},oe={class:"text-lg font-medium text-gray-900"},le={class:"text-sm text-gray-500 capitalize"},se={key:0,class:"mt-2 text-sm text-gray-500"},ae={class:"mt-4 flex justify-between items-center"},re={class:"text-xs text-gray-500"},ne={class:"flex space-x-2"},ie=["onClick"],de=["onClick"],ue=["onClick"],me={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ce={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},pe={class:"text-lg font-semibold text-gray-900 mb-4"},ge={class:"space-y-4"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={class:"inline-flex items-center"},xe={class:"flex justify-end space-x-3 mt-6"},Ee={__name:"TemplateManager",setup(ye){const S=$(),c=G(),y=i([]),w=i(!1),v=i(""),b=i(""),f=i(!1),p=i(!1),l=i({name:"",slug:"",description:"",category:"general",is_active:!0,sort_order:0,content:[]});A(async()=>{await g()});const g=async()=>{w.value=!0;try{let s=await c.getTemplates();if(v.value&&(s=s.filter(e=>e.category===v.value)),b.value){const e=b.value==="active";s=s.filter(o=>o.is_active===e)}y.value=s}catch(s){console.error("Error loading templates:",s)}finally{w.value=!1}},k=()=>{p.value=!1,l.value={name:"",slug:"",description:"",category:"general",is_active:!0,sort_order:0,content:[]},f.value=!0},U=async s=>{try{const e=await c.getTemplate(s);l.value={...e},p.value=!0,f.value=!0}catch(e){console.error("Error loading template:",e)}},C=()=>{f.value=!1},M=async()=>{try{p.value?await c.updateTemplate(l.value.id,l.value):await c.createTemplate(l.value),C(),await g()}catch(s){console.error("Error saving template:",s),alert("Error saving template: "+s.message)}},N=async s=>{if(confirm("Are you sure you want to delete this template?"))try{await c.deleteTemplate(s),await g()}catch(e){console.error("Error deleting template:",e),alert("Error deleting template: "+e.message)}},j=s=>{S.push(`/page-builder?template=${s}`)};return(s,e)=>(n(),a("div",H,[t("div",J,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Template Manager"),t("p",{class:"text-gray-600"},"Create, manage, and use templates for your pages")],-1)),t("button",{onClick:k,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2"},[u(m(P),{class:"w-5 h-5"}),e[8]||(e[8]=t("span",null,"Create Template",-1))])]),t("div",K,[t("div",Q,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",onChange:g},e[10]||(e[10]=[V('<option value="">All Categories</option><option value="landing">Landing Pages</option><option value="blog">Blog Posts</option><option value="e-commerce">E-commerce</option><option value="portfolio">Portfolio</option><option value="general">General</option>',6)]),544),[[h,v.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>b.value=o),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",onChange:g},e[12]||(e[12]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)]),544),[[h,b.value]])])])]),w.value?(n(),a("div",W,e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent"},null,-1)]))):y.value.length===0?(n(),a("div",X,[u(m(R),{class:"mx-auto h-16 w-16 text-gray-400"}),e[16]||(e[16]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No templates",-1)),e[17]||(e[17]=t("p",{class:"mt-1 text-gray-500"},"Get started by creating a new template.",-1)),t("div",Y,[t("button",{onClick:k,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[u(m(P),{class:"-ml-1 mr-2 h-5 w-5"}),e[15]||(e[15]=B(" Create New Template "))])])])):(n(),a("div",Z,[(n(!0),a(D,null,F(y.value,o=>{var T;return n(),a("div",{key:o.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},[t("div",ee,[t("div",te,[t("div",null,[t("h3",oe,d(o.name),1),t("p",le,d(o.category),1)]),t("span",{class:z(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(o.is_active?"Active":"Inactive"),3)]),o.description?(n(),a("p",se,d(o.description),1)):E("",!0),t("div",ae,[t("span",re,d(((T=o.content)==null?void 0:T.length)||0)+" sections ",1),t("div",ne,[t("button",{onClick:_=>j(o.id),class:"text-blue-600 hover:text-blue-900 text-sm",title:"Use this template"},[u(m(I),{class:"w-4 h-4"})],8,ie),t("button",{onClick:_=>U(o.id),class:"text-gray-600 hover:text-gray-900 text-sm",title:"Edit template"},[u(m(O),{class:"w-4 h-4"})],8,de),t("button",{onClick:_=>N(o.id),class:"text-red-600 hover:text-red-900 text-sm",title:"Delete template"},[u(m(q),{class:"w-4 h-4"})],8,ue)])])])])}),128))])),f.value?(n(),a("div",me,[t("div",ce,[t("h3",pe,d(p.value?"Edit Template":"Create New Template"),1),t("div",ge,[t("div",ve,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Template Name",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.name=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter template name"},null,512),[[x,l.value.name]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.slug=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"template-slug"},null,512),[[x,l.value.slug]])])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),r(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.category=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[20]||(e[20]=[V('<option value="landing">Landing Page</option><option value="blog">Blog Post</option><option value="e-commerce">E-commerce</option><option value="portfolio">Portfolio</option><option value="general">General</option>',5)]),512),[[h,l.value.category]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of the template"},null,512),[[x,l.value.description]])]),t("div",be,[t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),t("label",fe,[r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.is_active=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"},null,512),[[L,l.value.is_active]]),e[23]||(e[23]=t("span",{class:"ml-2"},"Active",-1))])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sort Order",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.sort_order=o),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,l.value.sort_order,void 0,{number:!0}]])])])]),t("div",xe,[t("button",{onClick:C,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),t("button",{onClick:M,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},d(p.value?"Update":"Create"),1)])])])):E("",!0)]))}};export{Ee as default};
