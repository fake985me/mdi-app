import{q as T,r as g,s as B,J as p,o as F,b as d,d as t,k as z,t as n,e as m,f,x,y as b,K as h,F as D,h as K,v as Q,g as E,i as u,n as S,w as J,j as R}from"./main-wp7H4zy9.js";import{u as W}from"./warehouse-BgDV8_UP.js";import{P as C}from"./package-Bqhxvjvc.js";import{T as X}from"./triangle-alert-B2GCNcpL.js";import{C as $}from"./circle-x-DfZUWRnT.js";import"./api-D6uEPlNO.js";const G={class:"p-6"},H={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Y={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Z={class:"flex items-center justify-between"},tt={class:"text-2xl font-bold text-gray-900"},et={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},st={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ot={class:"flex items-center justify-between"},rt={class:"text-2xl font-bold text-orange-600"},nt={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},at={class:"flex items-center justify-between"},it={class:"text-2xl font-bold text-red-600"},dt={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},ut={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ct={class:"p-6 border-b border-gray-200"},mt={class:"flex justify-between items-center"},xt={class:"flex space-x-4"},gt={class:"overflow-x-auto"},pt={class:"w-full"},ft={class:"bg-white divide-y divide-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"flex items-center"},vt={class:"flex-shrink-0 h-10 w-10"},_t=["src","alt"],wt={key:1,class:"h-10 w-10 bg-gray-200 rounded-lg flex items-center justify-center"},kt={class:"ml-4"},ht={class:"text-sm font-medium text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},At={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Vt=["onClick"],qt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Lt={class:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto"},Pt={class:"mb-4"},It={class:"text-sm text-gray-600 mb-2"},Nt={class:"text-sm text-gray-600 mb-4"},Qt={__name:"InventoryPage",setup(Ot){const l=W(),j=T(),c=g(""),a=g(""),y=g(!1),i=g(null),r=B({movement_type:"incoming",quantity:1,notes:""}),A=p(()=>l.products.reduce((s,e)=>s+e.current_stock,0)),M=p(()=>l.products.filter(s=>s.current_stock>0&&s.current_stock<=s.minimum_stock).length),V=p(()=>l.products.filter(s=>s.current_stock===0).length),q=p(()=>{let s=l.products;return c.value&&(s=s.filter(e=>e.name.toLowerCase().includes(c.value.toLowerCase())||e.sku.toLowerCase().includes(c.value.toLowerCase()))),a.value&&(a.value==="normal"?s=s.filter(e=>e.current_stock>e.minimum_stock):a.value==="low"?s=s.filter(e=>e.current_stock>0&&e.current_stock<=e.minimum_stock):a.value==="out"&&(s=s.filter(e=>e.current_stock===0))),s}),L=(s,e)=>s===0?"Out of Stock":s<=e?"Low Stock":"Normal",P=(s,e)=>s===0?"text-red-600":s<=e?"text-orange-600":"text-green-600",I=(s,e)=>s===0?"bg-red-100 text-red-800":s<=e?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800",N=s=>{i.value=s,y.value=!0},v=()=>{y.value=!1,i.value=null,r.movement_type="incoming",r.quantity=1,r.notes=""},O=async()=>{var e;if(!i.value)return;const s={product_id:i.value.id,movement_type:r.movement_type,quantity:parseInt(r.quantity),notes:r.notes,created_by:(e=j.profile)==null?void 0:e.id};await l.createStockMovement(s),v()};return F(async()=>{await l.fetchProducts(),await l.fetchCategories()}),(s,e)=>{var _,w;const U=E("router-link");return u(),d("div",G,[e[18]||(e[18]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Inventory Overview"),t("p",{class:"text-gray-600"},"Monitor stock levels and inventory status")],-1)),t("div",H,[t("div",Y,[t("div",Z,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Items",-1)),t("p",tt,n(A.value),1)]),t("div",et,[m(f(C),{class:"w-6 h-6 text-blue-600"})])])]),t("div",st,[t("div",ot,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Low Stock",-1)),t("p",rt,n(M.value),1)]),t("div",nt,[m(f(X),{class:"w-6 h-6 text-orange-600"})])])]),t("div",lt,[t("div",at,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Out of Stock",-1)),t("p",it,n(V.value),1)]),t("div",dt,[m(f($),{class:"w-6 h-6 text-red-600"})])])])]),t("div",ut,[t("div",ct,[t("div",mt,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Inventory Status",-1)),t("div",xt,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),type:"text",placeholder:"Search products...",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,c.value]]),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value=o),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[8]||(e[8]=[t("option",{value:""},"All Status",-1),t("option",{value:"normal"},"Normal Stock",-1),t("option",{value:"low"},"Low Stock",-1),t("option",{value:"out"},"Out of Stock",-1)]),512),[[h,a.value]])])])]),t("div",gt,[t("table",pt,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKU "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Current Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Min Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",ft,[(u(!0),d(D,null,K(q.value,o=>{var k;return u(),d("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",yt,[t("div",bt,[t("div",vt,[o.image_url?(u(),d("img",{key:0,src:o.image_url,alt:o.name,class:"h-10 w-10 rounded-lg object-cover"},null,8,_t)):(u(),d("div",wt,[m(f(C),{class:"w-5 h-5 text-gray-400"})]))]),t("div",kt,[t("div",ht,n(o.name),1)])])]),t("td",St,n(o.sku),1),t("td",Ct,n(((k=o.categories)==null?void 0:k.name)||"Uncategorized"),1),t("td",{class:S(["px-6 py-4 whitespace-nowrap text-sm font-medium",P(o.current_stock,o.minimum_stock)])},n(o.current_stock),3),t("td",jt,n(o.minimum_stock),1),t("td",At,[t("span",{class:S(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",I(o.current_stock,o.minimum_stock)])},n(L(o.current_stock,o.minimum_stock)),3)]),t("td",Mt,[t("button",{onClick:Ut=>N(o),class:"text-blue-600 hover:text-blue-900 mr-3"}," Adjust Stock ",8,Vt),m(U,{to:"/products",class:"text-gray-600 hover:text-gray-900"},{default:J(()=>e[10]||(e[10]=[R(" View Details ")])),_:1,__:[10]})])])}),128))])])])]),y.value?(u(),d("div",qt,[t("div",Lt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Adjust Stock",-1)),t("div",Pt,[t("p",It,"Product: "+n((_=i.value)==null?void 0:_.name),1),t("p",Nt,"Current Stock: "+n((w=i.value)==null?void 0:w.current_stock),1)]),t("form",{onSubmit:Q(O,["prevent"]),class:"space-y-4"},[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Movement Type",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.movement_type=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},e[12]||(e[12]=[t("option",{value:"incoming"},"Incoming (Add Stock)",-1),t("option",{value:"outgoing"},"Outgoing (Remove Stock)",-1)]),512),[[h,r.movement_type]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantity",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.quantity=o),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,r.quantity]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),x(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.notes=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional notes about this stock movement"},null,512),[[b,r.notes]])]),t("div",{class:"flex justify-end space-x-4"},[t("button",{type:"button",onClick:v,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e[16]||(e[16]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Adjust Stock ",-1))])],32)])])):z("",!0)])}}};export{Qt as default};
